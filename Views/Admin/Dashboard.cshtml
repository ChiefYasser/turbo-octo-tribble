@{
    ViewData["Title"] = "Admin Dashboard";
}

<div class="row mb-4">
    <!-- Card 1: Total Applications -->
    <div class="col-md-6 mb-4">
        <div class="card text-center p-4 shadow-sm border-0">
            <h1 class="display-4 fw-bold" style="color: var(--brand-red)">@ViewBag.TotalApplications</h1>
            <p class="text-muted text-uppercase fw-bold">Total Applications</p>
        </div>
    </div>
    <!-- Card 2: Active Jobs -->
    <div class="col-md-6 mb-4">
        <div class="card text-center p-4 shadow-sm border-0">
            <h1 class="display-4 fw-bold" style="color: var(--brand-black)">@ViewBag.TotalJobs</h1>
            <p class="text-muted text-uppercase fw-bold">Active Jobs</p>
        </div>
    </div>
</div>

<div class="row">
    <!-- Pie Chart -->
    <div class="col-md-6 mb-4">
        <div class="card p-3 shadow-sm border-0 h-100">
            <h5 class="card-title text-center fw-bold" style="color: var(--brand-dark-red)">Applications per Job</h5>
            <div class="chart-container" style="position: relative; height:300px; width:100%">
                <canvas id="jobChart"></canvas>
            </div>
        </div>
    </div>

    <!-- Bar Chart -->
    <div class="col-md-6 mb-4">
        <div class="card p-3 shadow-sm border-0 h-100">
            <h5 class="card-title text-center fw-bold" style="color: var(--brand-dark-red)">Application Status</h5>
            <div class="chart-container" style="position: relative; height:300px; width:100%">
                <canvas id="statusChart"></canvas>
            </div>
        </div>
    </div>
</div>

<!-- Scripts for Charts -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    // 1. Job Pie Chart
    var ctx1 = document.getElementById('jobChart').getContext('2d');
    var jobChart = new Chart(ctx1, {
        type: 'doughnut',
        data: {
            labels: @Html.Raw(Json.Serialize(ViewBag.JobLabels)),
            datasets: [{
                data: @Html.Raw(Json.Serialize(ViewBag.JobData)),
                backgroundColor: ['#A52222', '#000000', '#D29191', '#531111', '#888888'],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false
        }
    });

    // 2. Status Bar Chart
    var ctx2 = document.getElementById('statusChart').getContext('2d');
    var statusChart = new Chart(ctx2, {
        type: 'bar',
        data: {
            labels: @Html.Raw(Json.Serialize(ViewBag.StatusLabels)),
            datasets: [{
                label: 'Candidates',
                data: @Html.Raw(Json.Serialize(ViewBag.StatusData)),
                backgroundColor: '#A52222',
                borderColor: '#531111',
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: { beginAtZero: true, ticks: { precision: 0 } }
            }
        }
    });
</script>